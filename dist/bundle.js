(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,o=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===t(o)?o:String(o)),i)}var o}var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.length=e,this.hits=0,this.sunk=!1,this.coordinates=null}var n,r;return n=t,(r=[{key:"hit",value:function(){this.hits++,this.hits>=this.length&&(this.sunk=!0)}},{key:"isSunk",value:function(){return this.sunk}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===r(o)?o:String(o)),i)}var o}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.board=Array(10).fill(null).map((function(){return Array(10).fill(null)})),this.missedAttacks=[],this.ships=[]}var e,n;return e=t,(n=[{key:"placeShip",value:function(t,e,n,r){if(!this.isValidPosition(t,e,n,r))throw new Error("Posici칩n no v치lida para colocar el barco.");for(var i=0;i<t.length;i++)r?this.board[e+i][n]=t:this.board[e][n+i]=t;this.ships.push(t)}},{key:"isValidPosition",value:function(t,e,n,r){if(r){if(e+t.length>10)return!1}else if(n+t.length>10)return!1;for(var i=0;i<t.length;i++)if(r){if(this.board[e+i][n])return!1}else if(this.board[e][n+i])return!1;return!0}},{key:"receiveAttack",value:function(t,e){if(null===this.board[t][e])this.missedAttacks.push({x:t,y:e});else{if("hit"===this.board[t][e])return;var n=this.board[t][e];n.hit(),this.board[t][e]="hit",n.isSunk()}}},{key:"allShipsSunk",value:function(){return this.board.flat().every((function(t){return null===t||"hit"===t}))}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===a(i)?i:String(i)),r)}var i}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.previousAttacks=[]}var e,n;return e=t,(n=[{key:"attack",value:function(t,e,n){this.previousAttacks.some((function(t){return t.x===e&&t.y===n}))||(t.receiveAttack(e,n),this.previousAttacks.push({x:e,y:n}))}},{key:"randomAttack",value:function(t){var e,n;do{e=Math.floor(10*Math.random()),n=Math.floor(10*Math.random())}while(this.previousAttacks.some((function(t){return t.x===e&&t.y===n})));this.attack(t,e,n)}},{key:"placeShips",value:function(t,e,n){var r=0,i=!0;document.getElementById("orientationButton").addEventListener("click",(function(){i=!i})),n.addEventListener("click",(function(n){if(n.target.classList.contains("cell")&&r<e.length){var o=parseInt(n.target.dataset.x),a=parseInt(n.target.dataset.y);!function(e,n,r,i){if(i){if(n+e.length>10)return!1}else if(r+e.length>10)return!1;for(var o=0;o<e.length;o++)if(i){if(t.isOccupied(n+o,r))return!1}else if(t.isOccupied(n,r+o))return!1;return!0}(e[r],o,a,i)?alert("Posici칩n no v치lida. Intenta de nuevo."):(t.placeShip(e[r],o,a,i),r++)}}))}},{key:"placeShipsRandomly",value:function(t,e){var n=this;e.forEach((function(e){var r,i,o;do{r=Math.floor(10*Math.random()),i=Math.floor(10*Math.random()),o=Math.random()<.5}while(!n._canPlace(e,r,i,o,t));t.placeShip(e,r,i,o)}))}},{key:"_canPlace",value:function(t,e,n,r,i){if(r){if(e+t.length>10)return!1}else if(n+t.length>10)return!1;for(var o=0;o<t.length;o++)if(r){if(i.isOccupied(e+o,n))return!1}else if(i.isOccupied(e,n+o))return!1;return!0}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),c=new n(5),s=new n(4),f=new n(3),h=new n(3),y=new n(2),d=(new l("Human"),new l("Computer")),p=new o,v=new o;document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("startGameButton"),e=document.getElementById("gameContainer"),n=0,r=[c,s,f,h,y],i=document.querySelector("#human-board .grid"),o=document.querySelector("#computer-board .grid");function a(t){document.querySelector("#currentShip span").textContent=t}function u(t){for(var e=0;e<10;e++)for(var n=0;n<10;n++){var r=document.createElement("div");r.classList.add("cell"),r.dataset.x=e,r.dataset.y=n,t.appendChild(r)}}u(i),u(o),t.addEventListener("click",(function(){e.style.display="flex",t.style.display="none",a(r[n].name),i.addEventListener("mouseover",(function(t){t.target.classList.contains("cell")&&function(t,e,n){for(var r=0;r<n;r++){var i=document.querySelector('.cell[data-x="'.concat(t+r,'"][data-y="').concat(e,'"]'));i&&i.classList.add("hover-highlight")}}(parseInt(t.target.dataset.x),parseInt(t.target.dataset.y),r[n].length)})),i.addEventListener("mouseout",(function(){document.querySelectorAll(".cell.hover-highlight").forEach((function(t){return t.classList.remove("hover-highlight")}))})),i.addEventListener("click",(function(t){if(t.target.classList.contains("cell")){var e=parseInt(t.target.dataset.x),i=parseInt(t.target.dataset.y);p.placeShip(r[n],e,i),++n<r.length?a(r[n].name):document.getElementById("currentShip").style.display="none"}})),d.placeShipsRandomly(v)}))}))})();